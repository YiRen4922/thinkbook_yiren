# 启动流程
# 地址分配

## 堆栈
### 二、硬件支持：关键寄存器

CPU 通过两个非常重要的寄存器来管理和操作硬件堆栈：

1. **栈指针寄存器**
    
    - **x86 (`SP/ESP/RSP`)** / **ARM (`SP`)** / **RISC-V (`sp`)**
        
    - **作用**：它**永远**指向栈的**顶部**（即下一个压栈操作将要使用的地址，或者最后一个出栈操作之后的地址）。任何 `push` 或 `pop` 操作都会自动更新这个指针。
        
    - 可以想象成羽毛球筒的盖子，它总是指向最上面那个羽毛球的位置。
        
2. **基址指针/帧指针寄存器**
    
    - **x86 (`BP/EBP/RBP`)** / **ARM (`FP`)** / **RISC-V (`s0`)**
        
    - **作用**：它指向**当前栈帧**的一个稳定基地址。函数内部通过相对于基址指针的偏移量来访问参数和局部变量。虽然编译器优化有时会省略它，但其概念至关重要。




## [[SPI|SPI外设]]
