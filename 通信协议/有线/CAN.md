# 基础知识
## CAN总线介绍
CAN（Controller Area Network） 总线是由博世（Bosch） 公司于 1986 年推出的串行通信协  
议， 专为汽车电子系统设计， 旨在减少车辆中线束数量， 实现多个电子控制单元（ECU） 之间  
的高效通信。
### 1. CAN 总线核心特点   
CAN 总线支持多主通信， 所有节点均可主动发送数据， 无需依赖中心控制器。 其采用非破  
坏性仲裁机制， 通过 ID 优先级解决总线冲突， 确保高优先级数据优先传输。  
CAN 总线具备高可靠性， 内置 CRC 校验、 错误检测与恢复机制， 同时采用差分信号增强抗  
电磁干扰能力。 此外， CAN 总线通过简化布线和降低系统复杂度， 实现了低成本的优势。  
### 2. 应用领域  
(1)汽车电子： 发动机控制、 车身模块（灯光/门窗） 、 诊断系统（OBD-II） 等。  
(2)工业自动化： PLC、 传感器网络、 机器人控制。  
(3)其他领域： 医疗设备、 航空航天、 智能楼宇。  
### 3. 发展历程  
- 1983 年： Bosch 启动汽车网络技术研究。  
- 1986 年： 正式发布 CAN 协议。  
- 1987 年： 英特尔与飞利浦推出首款 CAN 控制器芯片。  
- 1991 年： CAN 2.0 规范发布， 首次应用于奔驰 S 级轿车。  
- 1993 年： 成为国际标准（ISO 11898） 。  
- 2015 年： CAN FD（Flexible Data Rate） 标准化（支持更高速率与 64 字节数据） 。  
- 2020 年： 下一代 CAN XL 发布， 带宽进一步提升。

> 工业领域广泛应用的是1993 年的国际标准（ISO 11898） 
> 而汽车电子领域应用FD或XL等更新的标准

## 硬件连接
在 CAN 总线硬件连接中， 有 CPU 自带 CAN 控制器和 CPU 没有 CAN 控制器需外设转接（如SPI 转 CAN） 这两种情况， 本小节将对这两种连接方式进行讲解。

### 1. CPU 自带 CAN 控制器
![](../../image/CAN-1756221161730.webp)

### 2. CPU 没有 CAN 控制器

![](../../image/CAN-1756221151876.webp)

## CAN 总线电气属性

![](../../image/CAN-1756221296987.webp)
# CAN总线帧格式
## 数据帧
![](../../image/CAN-1756221317988.webp)

一帧数据帧
![](../../image/CAN-1756309503448.webp)

## 遥控帧
![](../../image/CAN-1756221332889.webp)
## 错误帧
![](../../image/CAN-1756221346363.webp)
## 过载帧
![](../../image/CAN-1756221355131.webp)
## 帧间隔
![](../../image/CAN-1756221363146.webp)
## 位填充
位填充是 CAN 协议中用于确保数据传输过程中信号同步的重要机制， 其作用是在数据帧中避免出现长时间不变的信号电平， 从而保障发送端与接收端的同步。  
位填充规则： 当数据中出现 5 个连续的相同极性位时， 在第 6 位插入一个与这些位极性相反的填充位。

>填充范围： 从帧起始部分到 CRC 字段之间进行， CRC 字段之后的数据（如 ACK 字段和帧结束） 不进行填充



## CAN总线波形实例分析

# 如何使用CAN总线
